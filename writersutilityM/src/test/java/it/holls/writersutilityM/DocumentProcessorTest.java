package it.holls.writersutilityM;

import static org.junit.Assert.assertEquals;

import java.util.Map.Entry;
import java.util.stream.Collectors;

import org.junit.Test;

import documentProcessor.DocumentProcessor;
import documentProcessor.DocumentProcessorInLineText;

public class DocumentProcessorTest {

	private static String sampleText = "ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche' ciao perch&#232; perche'";
	private static String expectedTransformedText = "ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span> ciao <span style='background-color: #FF0000'>perch&#233;</span> <span style='background-color: #FF0000'>perch&#233;</span>";
	
	@Test
	public void searchForWrongWordsRegexTest() {
		DocumentProcessor dp = new DocumentProcessorInLineText();
		String transformedText = "";
		for(int i=0; i<1000; i++)
			transformedText = dp.searchForWrongWords(sampleText);
		assertEquals(expectedTransformedText, transformedText);
	}
	
	@Test
	public void searchForWrongWordsReplaceTest() {
		DocumentProcessor dp = new DocumentProcessorInLineText();
		String transformedText = "";
		for(int i=0; i<1000; i++)
			transformedText = dp.searchForWrongWordsReplaceAll(sampleText);
		assertEquals(expectedTransformedText, transformedText);
	}

	@Test
	public void searchForAllWrongWordsReplaceTest() {
		DocumentProcessor dp = new DocumentProcessorInLineText();
		String sampleText = utils.Utils.itWrongWords.entrySet().stream().map(Entry::getKey).collect(Collectors.joining(" "));
		String transformedText = dp.searchForWrongWordsReplaceAll(sampleText);
		assertEquals(utils.Utils.itWrongWords.entrySet().stream().map(Entry::getValue).collect(Collectors.joining("</span> <span style='background-color: #FF0000'>", "<span style='background-color: #FF0000'>", "</span>")), transformedText);
	}
	
}
